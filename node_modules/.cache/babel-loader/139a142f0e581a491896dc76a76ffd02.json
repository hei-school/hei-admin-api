{"ast":null,"code":"'use strict';\n\nconst util = require('./util');\nconst buildOptions = require('./util').buildOptions;\nconst x2j = require('./xmlstr2xmlnode');\n\n//TODO: do it later\nconst convertToJsonString = function (node, options) {\n  options = buildOptions(options, x2j.defaultOptions, x2j.props);\n  options.indentBy = options.indentBy || '';\n  return _cToJsonStr(node, options, 0);\n};\nconst _cToJsonStr = function (node, options, level) {\n  let jObj = '{';\n\n  //traver through all the children\n  const keys = Object.keys(node.child);\n  for (let index = 0; index < keys.length; index++) {\n    const tagname = keys[index];\n    if (node.child[tagname] && node.child[tagname].length > 1) {\n      jObj += '\"' + tagname + '\" : [ ';\n      for (let tag in node.child[tagname]) {\n        jObj += _cToJsonStr(node.child[tagname][tag], options) + ' , ';\n      }\n      jObj = jObj.substr(0, jObj.length - 1) + ' ] '; //remove extra comma in last\n    } else {\n      jObj += '\"' + tagname + '\" : ' + _cToJsonStr(node.child[tagname][0], options) + ' ,';\n    }\n  }\n  util.merge(jObj, node.attrsMap);\n  //add attrsMap as new children\n  if (util.isEmptyObject(jObj)) {\n    return util.isExist(node.val) ? node.val : '';\n  } else {\n    if (util.isExist(node.val)) {\n      if (!(typeof node.val === 'string' && (node.val === '' || node.val === options.cdataPositionChar))) {\n        jObj += '\"' + options.textNodeName + '\" : ' + stringval(node.val);\n      }\n    }\n  }\n  //add value\n  if (jObj[jObj.length - 1] === ',') {\n    jObj = jObj.substr(0, jObj.length - 2);\n  }\n  return jObj + '}';\n};\nfunction stringval(v) {\n  if (v === true || v === false || !isNaN(v)) {\n    return v;\n  } else {\n    return '\"' + v + '\"';\n  }\n}\nfunction indentate(options, level) {\n  return options.indentBy.repeat(level);\n}\nexports.convertToJsonString = convertToJsonString;","map":{"version":3,"names":["util","require","buildOptions","x2j","convertToJsonString","node","options","defaultOptions","props","indentBy","_cToJsonStr","level","jObj","keys","Object","child","index","length","tagname","tag","substr","merge","attrsMap","isEmptyObject","isExist","val","cdataPositionChar","textNodeName","stringval","v","isNaN","indentate","repeat","exports"],"sources":["F:/project/front-end/hei-admin-ui/node_modules/fast-xml-parser/src/node2json_str.js"],"sourcesContent":["'use strict';\n\nconst util = require('./util');\nconst buildOptions = require('./util').buildOptions;\nconst x2j = require('./xmlstr2xmlnode');\n\n//TODO: do it later\nconst convertToJsonString = function(node, options) {\n  options = buildOptions(options, x2j.defaultOptions, x2j.props);\n\n  options.indentBy = options.indentBy || '';\n  return _cToJsonStr(node, options, 0);\n};\n\nconst _cToJsonStr = function(node, options, level) {\n  let jObj = '{';\n\n  //traver through all the children\n  const keys = Object.keys(node.child);\n\n  for (let index = 0; index < keys.length; index++) {\n    const tagname = keys[index];\n    if (node.child[tagname] && node.child[tagname].length > 1) {\n      jObj += '\"' + tagname + '\" : [ ';\n      for (let tag in node.child[tagname]) {\n        jObj += _cToJsonStr(node.child[tagname][tag], options) + ' , ';\n      }\n      jObj = jObj.substr(0, jObj.length - 1) + ' ] '; //remove extra comma in last\n    } else {\n      jObj += '\"' + tagname + '\" : ' + _cToJsonStr(node.child[tagname][0], options) + ' ,';\n    }\n  }\n  util.merge(jObj, node.attrsMap);\n  //add attrsMap as new children\n  if (util.isEmptyObject(jObj)) {\n    return util.isExist(node.val) ? node.val : '';\n  } else {\n    if (util.isExist(node.val)) {\n      if (!(typeof node.val === 'string' && (node.val === '' || node.val === options.cdataPositionChar))) {\n        jObj += '\"' + options.textNodeName + '\" : ' + stringval(node.val);\n      }\n    }\n  }\n  //add value\n  if (jObj[jObj.length - 1] === ',') {\n    jObj = jObj.substr(0, jObj.length - 2);\n  }\n  return jObj + '}';\n};\n\nfunction stringval(v) {\n  if (v === true || v === false || !isNaN(v)) {\n    return v;\n  } else {\n    return '\"' + v + '\"';\n  }\n}\n\nfunction indentate(options, level) {\n  return options.indentBy.repeat(level);\n}\n\nexports.convertToJsonString = convertToJsonString;\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC9B,MAAMC,YAAY,GAAGD,OAAO,CAAC,QAAQ,CAAC,CAACC,YAAY;AACnD,MAAMC,GAAG,GAAGF,OAAO,CAAC,kBAAkB,CAAC;;AAEvC;AACA,MAAMG,mBAAmB,GAAG,UAASC,IAAI,EAAEC,OAAO,EAAE;EAClDA,OAAO,GAAGJ,YAAY,CAACI,OAAO,EAAEH,GAAG,CAACI,cAAc,EAAEJ,GAAG,CAACK,KAAK,CAAC;EAE9DF,OAAO,CAACG,QAAQ,GAAGH,OAAO,CAACG,QAAQ,IAAI,EAAE;EACzC,OAAOC,WAAW,CAACL,IAAI,EAAEC,OAAO,EAAE,CAAC,CAAC;AACtC,CAAC;AAED,MAAMI,WAAW,GAAG,UAASL,IAAI,EAAEC,OAAO,EAAEK,KAAK,EAAE;EACjD,IAAIC,IAAI,GAAG,GAAG;;EAEd;EACA,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACR,IAAI,CAACU,KAAK,CAAC;EAEpC,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGH,IAAI,CAACI,MAAM,EAAED,KAAK,EAAE,EAAE;IAChD,MAAME,OAAO,GAAGL,IAAI,CAACG,KAAK,CAAC;IAC3B,IAAIX,IAAI,CAACU,KAAK,CAACG,OAAO,CAAC,IAAIb,IAAI,CAACU,KAAK,CAACG,OAAO,CAAC,CAACD,MAAM,GAAG,CAAC,EAAE;MACzDL,IAAI,IAAI,GAAG,GAAGM,OAAO,GAAG,QAAQ;MAChC,KAAK,IAAIC,GAAG,IAAId,IAAI,CAACU,KAAK,CAACG,OAAO,CAAC,EAAE;QACnCN,IAAI,IAAIF,WAAW,CAACL,IAAI,CAACU,KAAK,CAACG,OAAO,CAAC,CAACC,GAAG,CAAC,EAAEb,OAAO,CAAC,GAAG,KAAK;MAChE;MACAM,IAAI,GAAGA,IAAI,CAACQ,MAAM,CAAC,CAAC,EAAER,IAAI,CAACK,MAAM,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;IAClD,CAAC,MAAM;MACLL,IAAI,IAAI,GAAG,GAAGM,OAAO,GAAG,MAAM,GAAGR,WAAW,CAACL,IAAI,CAACU,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC,CAAC,EAAEZ,OAAO,CAAC,GAAG,IAAI;IACtF;EACF;EACAN,IAAI,CAACqB,KAAK,CAACT,IAAI,EAAEP,IAAI,CAACiB,QAAQ,CAAC;EAC/B;EACA,IAAItB,IAAI,CAACuB,aAAa,CAACX,IAAI,CAAC,EAAE;IAC5B,OAAOZ,IAAI,CAACwB,OAAO,CAACnB,IAAI,CAACoB,GAAG,CAAC,GAAGpB,IAAI,CAACoB,GAAG,GAAG,EAAE;EAC/C,CAAC,MAAM;IACL,IAAIzB,IAAI,CAACwB,OAAO,CAACnB,IAAI,CAACoB,GAAG,CAAC,EAAE;MAC1B,IAAI,EAAE,OAAOpB,IAAI,CAACoB,GAAG,KAAK,QAAQ,KAAKpB,IAAI,CAACoB,GAAG,KAAK,EAAE,IAAIpB,IAAI,CAACoB,GAAG,KAAKnB,OAAO,CAACoB,iBAAiB,CAAC,CAAC,EAAE;QAClGd,IAAI,IAAI,GAAG,GAAGN,OAAO,CAACqB,YAAY,GAAG,MAAM,GAAGC,SAAS,CAACvB,IAAI,CAACoB,GAAG,CAAC;MACnE;IACF;EACF;EACA;EACA,IAAIb,IAAI,CAACA,IAAI,CAACK,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;IACjCL,IAAI,GAAGA,IAAI,CAACQ,MAAM,CAAC,CAAC,EAAER,IAAI,CAACK,MAAM,GAAG,CAAC,CAAC;EACxC;EACA,OAAOL,IAAI,GAAG,GAAG;AACnB,CAAC;AAED,SAASgB,SAAS,CAACC,CAAC,EAAE;EACpB,IAAIA,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAK,KAAK,IAAI,CAACC,KAAK,CAACD,CAAC,CAAC,EAAE;IAC1C,OAAOA,CAAC;EACV,CAAC,MAAM;IACL,OAAO,GAAG,GAAGA,CAAC,GAAG,GAAG;EACtB;AACF;AAEA,SAASE,SAAS,CAACzB,OAAO,EAAEK,KAAK,EAAE;EACjC,OAAOL,OAAO,CAACG,QAAQ,CAACuB,MAAM,CAACrB,KAAK,CAAC;AACvC;AAEAsB,OAAO,CAAC7B,mBAAmB,GAAGA,mBAAmB"},"metadata":{},"sourceType":"script"}