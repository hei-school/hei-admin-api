{"ast":null,"code":"import authProvider from '../providers/authProvider';\nexport const getPermissions = role => {\n  const whoamiId = authProvider.getCachedWhoami().id;\n  const createPermissions = ['list', 'read', 'show', 'create', 'export'];\n  const updatePermissions = createPermissions.concat('edit');\n  const roleDefinitions = {\n    MANAGER: [{\n      action: 'read',\n      resource: 'profile',\n      record: {\n        id: whoamiId\n      }\n    }, {\n      action: updatePermissions,\n      resource: 'students'\n    }, {\n      action: updatePermissions,\n      resource: 'teachers'\n    }, {\n      action: createPermissions,\n      resource: 'fees'\n    }, {\n      action: createPermissions,\n      resource: 'payments'\n    }],\n    TEACHER: [{\n      action: 'read',\n      resource: 'profile',\n      record: {\n        id: whoamiId\n      }\n    }, {\n      action: ['list', 'read', 'show'],\n      resource: 'students'\n    }],\n    STUDENT: [{\n      action: 'read',\n      resource: 'profile',\n      record: {\n        id: whoamiId\n      }\n    }, {\n      action: ['list', 'read', 'show'],\n      resource: 'fees'\n    }, {\n      action: ['list', 'read', 'show'],\n      resource: 'payments'\n    }]\n  };\n  return roleDefinitions[role];\n};","map":{"version":3,"names":["authProvider","getPermissions","role","whoamiId","getCachedWhoami","id","createPermissions","updatePermissions","concat","roleDefinitions","MANAGER","action","resource","record","TEACHER","STUDENT"],"sources":["F:/project/front-end/hei-admin-ui/src/security/permissions.ts"],"sourcesContent":["import authProvider from '../providers/authProvider'\r\n\r\nexport const getPermissions = (role: string) => {\r\n  const whoamiId = authProvider.getCachedWhoami().id\r\n\r\n  const createPermissions = ['list', 'read', 'show', 'create', 'export']\r\n  const updatePermissions = createPermissions.concat('edit')\r\n\r\n  const roleDefinitions = {\r\n    MANAGER: [\r\n      { action: 'read', resource: 'profile', record: { id: whoamiId } },\r\n      { action: updatePermissions, resource: 'students' },\r\n      { action: updatePermissions, resource: 'teachers' },\r\n\r\n      { action: createPermissions, resource: 'fees' },\r\n      { action: createPermissions, resource: 'payments' }\r\n    ],\r\n\r\n    TEACHER: [\r\n      { action: 'read', resource: 'profile', record: { id: whoamiId } },\r\n      { action: ['list', 'read', 'show'], resource: 'students' }\r\n    ],\r\n\r\n    STUDENT: [\r\n      { action: 'read', resource: 'profile', record: { id: whoamiId } },\r\n\r\n      { action: ['list', 'read', 'show'], resource: 'fees' },\r\n      { action: ['list', 'read', 'show'], resource: 'payments' }\r\n    ]\r\n  }\r\n  return roleDefinitions[role as keyof typeof roleDefinitions]\r\n}\r\n"],"mappings":"AAAA,OAAOA,YAAY,MAAM,2BAA2B;AAEpD,OAAO,MAAMC,cAAc,GAAIC,IAAY,IAAK;EAC9C,MAAMC,QAAQ,GAAGH,YAAY,CAACI,eAAe,EAAE,CAACC,EAAE;EAElD,MAAMC,iBAAiB,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,CAAC;EACtE,MAAMC,iBAAiB,GAAGD,iBAAiB,CAACE,MAAM,CAAC,MAAM,CAAC;EAE1D,MAAMC,eAAe,GAAG;IACtBC,OAAO,EAAE,CACP;MAAEC,MAAM,EAAE,MAAM;MAAEC,QAAQ,EAAE,SAAS;MAAEC,MAAM,EAAE;QAAER,EAAE,EAAEF;MAAS;IAAE,CAAC,EACjE;MAAEQ,MAAM,EAAEJ,iBAAiB;MAAEK,QAAQ,EAAE;IAAW,CAAC,EACnD;MAAED,MAAM,EAAEJ,iBAAiB;MAAEK,QAAQ,EAAE;IAAW,CAAC,EAEnD;MAAED,MAAM,EAAEL,iBAAiB;MAAEM,QAAQ,EAAE;IAAO,CAAC,EAC/C;MAAED,MAAM,EAAEL,iBAAiB;MAAEM,QAAQ,EAAE;IAAW,CAAC,CACpD;IAEDE,OAAO,EAAE,CACP;MAAEH,MAAM,EAAE,MAAM;MAAEC,QAAQ,EAAE,SAAS;MAAEC,MAAM,EAAE;QAAER,EAAE,EAAEF;MAAS;IAAE,CAAC,EACjE;MAAEQ,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;MAAEC,QAAQ,EAAE;IAAW,CAAC,CAC3D;IAEDG,OAAO,EAAE,CACP;MAAEJ,MAAM,EAAE,MAAM;MAAEC,QAAQ,EAAE,SAAS;MAAEC,MAAM,EAAE;QAAER,EAAE,EAAEF;MAAS;IAAE,CAAC,EAEjE;MAAEQ,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;MAAEC,QAAQ,EAAE;IAAO,CAAC,EACtD;MAAED,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC;MAAEC,QAAQ,EAAE;IAAW,CAAC;EAE9D,CAAC;EACD,OAAOH,eAAe,CAACP,IAAI,CAAiC;AAC9D,CAAC"},"metadata":{},"sourceType":"module"}